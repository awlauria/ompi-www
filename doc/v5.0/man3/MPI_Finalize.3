.\" Automatically generated by Pandoc 2.14.2
.\"
.TH "MPI_Finalize" "3" "" "2021-08-30" "Open MPI"
.hy
.SH Name
.PP
\f[C]MPI_Finalize\f[R] - Terminates MPI execution environment.
.SH Syntax
.SS C Syntax
.IP
.nf
\f[C]
#include <mpi.h>

int MPI_Finalize()
\f[R]
.fi
.SS Fortran Syntax
.IP
.nf
\f[C]
USE MPI
! or the older form: INCLUDE \[aq]mpif.h\[aq]

MPI_FINALIZE(IERROR)
    INTEGER IERROR
\f[R]
.fi
.SS Fortran 2008 Syntax
.IP
.nf
\f[C]
USE mpi_f08

MPI_Finalize(ierror)
    INTEGER, OPTIONAL, INTENT(OUT) :: ierror
\f[R]
.fi
.SH Output Parameter
.IP \[bu] 2
\f[C]IERROR\f[R] : Fortran only: Error status (integer).
.SH Description
.PP
This routine cleans up all MPI states.
Once this routine is called, no MPI routine (not even
\f[C]MPI_Init\f[R]) may be called, except for \f[C]MPI_Get_version\f[R],
\f[C]MPI_Initialized\f[R], and \f[C]MPI_Finalized\f[R].
Unless there has been a call to \f[C]MPI_Abort\f[R], you must ensure
that all pending communications involving a process are complete before
the process calls \f[C]MPI_Finalize\f[R].
If the call returns, each process may either continue local computations
or exit without participating in further communication with other
processes.
At the moment when the last process calls \f[C]MPI_Finalize\f[R], all
pending sends must be matched by a receive, and all pending receives
must be matched by a send.
.PP
\f[C]MPI_Finalize\f[R] is collective over all connected processes.
If no processes were spawned, accepted, or connected, then this means it
is collective over \f[C]MPI_COMM_WORLD\f[R].
Otherwise, it is collective over the union of all processes that have
been and continue to be connected.
.SH Notes
.PP
All processes must call this routine before exiting.
All processes will still exist but may not make any further MPI calls.
\f[C]MPI_Finalize\f[R] guarantees that all local actions required by
communications the user has completed will, in fact, occur before it
returns.
However, \f[C]MPI_Finalize\f[R] guarantees nothing about pending
communications that have not been completed; completion is ensured only
by \f[C]MPI_Wait\f[R], \f[C]MPI_Test,\f[R] or \f[C]MPI_Request_free\f[R]
combined with some other verification of completion.
.PP
For example, a successful return from a blocking communication operation
or from \f[C]MPI_Wait\f[R] or \f[C]MPI_Test\f[R] means that the
communication is completed by the user and the buffer can be reused, but
does not guarantee that the local process has no more work to do.
Similarly, a successful return from \f[C]MPI_Request_free\f[R] with a
request handle generated by an \f[C]MPI_Isend\f[R] nullifies the handle
but does not guarantee that the operation has completed.
The \f[C]MPI_Isend\f[R] is complete only when a matching receive has
completed.
.PP
If you would like to cause actions to happen when a process finishes,
attach an attribute to \f[C]MPI_COMM_SELF\f[R] with a callback function.
Then, when \f[C]MPI_Finalize\f[R] is called, it will first execute the
equivalent of an \f[C]MPI_Comm_free\f[R] on \f[C]MPI_COMM_SELF\f[R].
This will cause the delete callback function to be executed on all keys
associated with \f[C]MPI_COMM_SELF\f[R] in an arbitrary order.
If no key has been attached to \f[C]MPI_COMM_SELF\f[R], then no callback
is invoked.
This freeing of \f[C]MPI_COMM_SELF\f[R] happens before any other parts
of MPI are affected.
Calling \f[C]MPI_Finalized\f[R] will thus return \[lq]false\[rq] in any
of these callback functions.
Once you have done this with \f[C]MPI_COMM_SELF\f[R], the results of
\f[C]MPI_Finalize\f[R] are not specified.
.SH Errors
.PP
Almost all MPI routines return an error value; C routines as the value
of the function and Fortran routines in the last argument.
.PP
Before the error value is returned, the current MPI error handler is
called.
By default, this error handler aborts the MPI job, except for I/O
function errors.
The error handler may be changed with \f[C]MPI_Comm_set_errhandler\f[R];
the predefined error handler \f[C]MPI_ERRORS_RETURN\f[R] may be used to
cause error values to be returned.
Note that MPI does not guarantee that an MPI program can continue past
an error.
.SH See Also
.PP
\f[C]MPI_Init\f[R](3) \f[C]MPI_Init_thread\f[R](3)
\f[C]MPI_Initialized\f[R](3) \f[C]MPI_Finalized\f[R](3)
